# 🎯 AlphaBloom 资金流向择时系统 - 完整指南

## ✅ 已完成的功能

恭喜！AlphaBloom资金流向择时系统已经成功创建，包含以下完整功能：

### 📊 数据覆盖

1. **北向资金流向**
   - 实时沪股通 + 深股通数据
   - 支持1日、3日、7日、14日、28日多周期统计
   - 显示净流入/流出和余额信息

2. **ETF资金流**
   - 覆盖主要ETF产品（沪深300、中证500、创业板、科创50、证券ETF）
   - 多周期资金流入流出统计
   - 图表可视化展示

3. **主力资金**
   - 沪深300成分股主力资金监控
   - 分级统计（超大单、大单、中单、小单）
   - 多周期净流入分析

4. **智能择时信号**
   - 基于三大资金流向的综合评分
   - 五级信号：强烈看多、偏多、中性、偏空、强烈看空
   - 具体信号解读和投资建议

### 🗂️ 已创建的文件

```
marketbrew/
├── capital_flow_timing_service.py   ✅ 资金流向数据服务核心模块
├── capital_timing_api.py            ✅ Flask API服务
├── capital_timing.html              ✅ 前端可视化界面
├── start_capital_timing.bat         ✅ Windows启动脚本
├── test_capital_timing.py           ✅ 测试脚本
├── README_CAPITAL_TIMING.md         ✅ 详细文档
└── ALPHABLOOM_TIMING_GUIDE.md       ✅ 本指南
```

## 🚀 快速启动（3步）

### 方法一：一键启动（推荐）

```bash
# Windows用户
双击运行: start_capital_timing.bat
```

### 方法二：手动启动

```bash
# 1. 进入项目目录
cd C:\Users\86158\marketbrew

# 2. 启动API服务
python capital_timing_api.py

# 3. 在浏览器打开
capital_timing.html
```

## 📱 访问界面

启动成功后：
- **API服务**: http://localhost:5001
- **前端页面**: 直接在浏览器中打开 `capital_timing.html`

## 🎨 界面功能说明

### 1. 择时信号卡片
- 显示综合评分和信号级别
- 五种颜色标识不同市场状态
- 列出具体的信号解读

### 2. 北向资金卡片
- 今日流入/流出数据
- 1/3/7/14/28日多周期统计
- 历史趋势柱状图

### 3. ETF资金流卡片
- 主要ETF的资金流向
- 多周期净流入统计
- 可视化图表展示

### 4. 主力资金卡片
- 沪深300成分股主力资金
- 多周期流入流出分析
- 趋势图表

## 🔧 API接口列表

### 核心接口

1. **综合择时数据**
   ```
   GET http://localhost:5001/api/timing/comprehensive
   ```
   返回所有数据和择时信号

2. **北向资金**
   ```
   GET http://localhost:5001/api/timing/north-bound?days=30
   ```

3. **ETF资金流**
   ```
   GET http://localhost:5001/api/timing/etf-flow?days=30
   ```

4. **主力资金**
   ```
   GET http://localhost:5001/api/timing/main-force?days=30
   ```

5. **择时信号**
   ```
   GET http://localhost:5001/api/timing/signal
   ```

6. **清空缓存**
   ```
   POST http://localhost:5001/api/timing/clear-cache
   ```

## 📊 数据说明

### 数据来源
- **完全免费**：使用东方财富公开API
- **无需账号**：不需要任何注册或认证
- **实时更新**：交易时间内实时刷新
- **准确可靠**：数据来自官方渠道

### 更新频率
- 缓存时间：5分钟
- 交易时间：实时更新
- 非交易时间：显示最近交易日数据

### 统计周期
- **1日**：当日/最近1个交易日
- **3日**：最近3个交易日
- **7日**：最近7个交易日（1周）
- **14日**：最近14个交易日（2周）
- **28日**：最近28个交易日（4周）

## 🎯 择时策略建议

### 短线交易（1-3日）
**关注指标**：
- 北向资金1日、3日流向
- 主力资金当日动向
- ETF资金短期变化

**操作建议**：
- 北向+主力双双流入 > 50亿 → 积极参与
- 北向+主力双双流出 > 50亿 → 谨慎观望
- 单一资金流入 → 适度参与

### 中线交易（7-14日）
**关注指标**：
- 北向资金7日、14日趋势
- ETF资金7日累计流向
- 主力资金持续性

**操作建议**：
- 三类资金持续净流入 → 中线看多
- 北向资金持续流入+ETF配合 → 建仓机会
- 资金流向分化 → 保持观望

### 长线布局（28日）
**关注指标**：
- 北向资金28日累计
- 所有资金的长期趋势
- 流入流出比例

**操作建议**：
- 28日持续净流入 → 长线配置
- 流入流出比 > 1.5 → 市场向好
- 流入流出比 < 0.7 → 谨慎减仓

## ⚠️ 重要提示

### 使用注意事项

1. **仅供参考**
   - 择时信号仅供参考，不构成投资建议
   - 需结合其他技术指标综合判断
   - 投资有风险，决策需谨慎

2. **数据时效性**
   - 非交易时间数据可能为0或显示上一交易日
   - 节假日和周末无新数据
   - 开盘前数据为前一日收盘数据

3. **网络要求**
   - 需要稳定的网络连接
   - 能访问东方财富网API
   - API有5分钟缓存机制

4. **性能优化**
   - 建议每5-10分钟刷新一次
   - 不要频繁清空缓存
   - 避免同时发起大量请求

## 🔍 故障排查

### 问题1：服务启动失败
```bash
# 检查Python版本
python --version  # 需要 >= 3.7

# 安装依赖
pip install flask flask-cors requests
```

### 问题2：前端无法加载数据
```bash
# 确认API服务正在运行
curl http://localhost:5001/health

# 检查端口是否被占用
netstat -ano | findstr :5001
```

### 问题3：数据显示为0
**原因**：
- 非交易时间
- API限流
- 网络问题

**解决**：
1. 确认当前是否为交易时间
2. 点击"清空缓存"重试
3. 检查网络连接

### 问题4：中文乱码
**原因**：编码问题

**解决**：
- 确保浏览器编码为UTF-8
- API服务已自动处理编码问题

## 🧪 测试验证

### 运行测试脚本
```bash
cd C:\Users\86158\marketbrew
python test_capital_timing.py
```

### 预期结果
- ✅ 东方财富基础服务测试通过
- ✅ 资金流向服务测试通过
- ✅ 综合择时数据获取成功

### 如果测试失败
1. 检查网络连接
2. 确认Python环境
3. 验证依赖包安装
4. 查看错误日志

## 📚 扩展阅读

### 相关文档
- `README_CAPITAL_TIMING.md` - 详细技术文档
- `README_EASTMONEY_ONLY.md` - 东方财富API说明
- `README_EMT_API.md` - EMT API对比说明

### 进阶功能
如需添加更多功能，可以：
1. 扩展更多ETF品种
2. 添加行业资金流向
3. 增加个股资金监控
4. 实现预警通知功能

## 🎉 成功标志

如果你看到：
- ✅ API服务正常启动（端口5001）
- ✅ 前端页面可以打开
- ✅ 数据可以正常显示（即使为0）
- ✅ 图表可以正常渲染

**恭喜！系统已成功部署！** 🎊

## 📞 技术支持

### 常见问题
1. 如何修改端口？
   - 修改 `capital_timing_api.py` 第142行
   - 同时修改 `capital_timing.html` 第298行的 `API_BASE`

2. 如何添加更多ETF？
   - 编辑 `capital_flow_timing_service.py` 第76-82行
   - 添加ETF代码到 `major_etfs` 列表

3. 如何调整缓存时间？
   - 修改 `capital_flow_timing_service.py` 第32行
   - 默认为300秒（5分钟）

### 联系方式
如有问题，请检查：
- Python版本和依赖包
- 网络连接状态
- 防火墙设置
- 端口占用情况

## 🏆 总结

**你已经成功创建了一个完整的资金流向择时系统！**

系统特点：
- ✅ 完全免费，无需账号
- ✅ 数据真实，来自东方财富
- ✅ 界面美观，操作简单
- ✅ 功能完整，覆盖多维度
- ✅ 扩展性强，易于定制

下一步：
1. 🎯 在交易时间运行，查看实时数据
2. 📊 结合自己的交易策略使用
3. 🔧 根据需要添加自定义功能
4. 📈 持续优化和改进

**祝投资顺利！** 🚀

---

**MarketBrew & AlphaBloom** - 让投资更智能 💡
Version 1.0 | 2025-11-29
